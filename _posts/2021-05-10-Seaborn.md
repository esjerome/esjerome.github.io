---
layout: post
title: "Dinosaurs are extinct today"
subtitle: "because they lacked opposable thumbs and the brainpower to build a space program."
date: 2020-01-26 23:45:13 -0400
background: '/img/posts/01.jpg'
---

# Hunspell

Hunspell es una herramienta util para la auto-correción de palabras bastante facil de usar. No estoy muy seguro si la busqueda de las palabras más similares lo hace por medio de la métrica de Levenshtein, ya que la página oficial no es muy explícita respecto al método implementado. (http://hunspell.github.io).

La instalación oficial es a través de:

~~~
pip install hunspell
~~~

Sin embargo, tanto en mi Mac como en Google Colab me generó un error que no logré corrregir, la alternativa que encontré fue instalarlo por medio de.

~~~
pip install cyhunspell
~~~

Por defecto hunspell funciona para la auto-correción de palabras en inglés, por ello es necesario alimentar un modelo por medio de diccionarios en formato .add y .dic que pueden ser descargados de internet. En mi caso descargué un diccionario de palabras del español Colombiano a través del siguiente repositotio : https://github.com/wooorm/dictionaries/tree/main/dictionaries/es-CO


Ambos los guardé en el directorio de trabajo con los nombre es-co.dic y es-co.aff

- Nota: Cuando se usa la función .add de Hunspell, lo que se hace es añadirla para que el programa la reconozca, sin embargo, el programa no la recomienda, para ello toca modificar el archivo .dic y .aff que aún no sé como se hace.



- Nota: Para lograr la predicción de palabras basada en nuevas palabras desconocidas, utilizé la función process.extract() de fuzzywuzzy, sin embargo, esta función se demora mucho hacer la correción de palabras.



```python
import requests
from selenium import webdriver

from fuzzywuzzy import fuzz
from fuzzywuzzy import process

import Levenshtein as lev

import spacy
from spacy.matcher import Matcher

import os

nlp = spacy.load("es_core_news_sm")

from hunspell import Hunspell
```


```python
import re
```


```python
driver = webdriver.Firefox()
driver.maximize_window()
```


```python
lst = []
url = 'http://oferta.senasofiaplus.edu.co/sofia-oferta/buscar-oferta-educativa.html'
driver.get(url)

button = driver.find_element_by_xpath('//*[@id="busqueda_paginacion"]')

for j in range(0,50):   
    for i in range(1,11):
        try:
            button.find_element_by_xpath('.//ul').find_elements_by_xpath('.//button')[i].click()        
            for i in range(len(driver.find_elements_by_xpath('//div[@class="left"]'))):
                lst.append(driver.find_elements_by_xpath('//div[@class="left"]')[i].find_elements_by_xpath('./p')[1].find_element_by_xpath('.//span').text.lower())
            button.find_element_by_xpath('.//ul').find_elements_by_xpath('.//button')[-1].click()
        except:
            pass
```


```python
driver.close()
```


```python
ingles = Hunspell()
path = os.path.abspath(os.getcwd())#para obtener mi ruta actual donde tengo los diccionarios
espa = Hunspell(path+'/es-col',path+'/es-col')

oferta =' '.join(lst)
lista_de_palabras = set(oferta.split(' '))
lista_de_palabras =[palabra.lower() for palabra in lista_de_palabras]
lista_de_palabras = ' '.join(lista_de_palabras)

doc = nlp(lista_de_palabras)
key_words = [token.text for token in doc if (token.is_stop == False and token.is_alpha == True and len(token)>3)]
```


```python
temp = []  
for i in key_words:
    if espa.spell(i):
        temp.append(i)
    else:
        if ingles.spell(i):
            temp.append(i)
        elif len(espa.suggest(i)) > 0:
            suges = espa.suggest(i)[0]
            if lev.distance(i.lower(),suges.lower()) <= 2:
                temp.append(espa.suggest(i)[0])
            else:
                temp.append(i)
        else:
                temp.append(i)
```


```python
to_add = ['catación','patronaje','fitosanitario','bioseguridad','soberanía','químicos','químico','detección','orgánico','líderes','higiénica','higiénico','solución','referencia','cálculos','informática','promoción','social','micro','químicas','químicos','café','vías','draw','ecológico','matemáticos','pedagógicas','eléctrico','formalización','cómputo',
         'múltiples','reentrenamiento','conceptualización','revit','corel','inglés','marmolado','soberanía','básicas','básico','básica','inducción','recepción','confección','metodológicas','aluminio','transformación','extensión','ecológica','entonación','ciudadano',
         'smaw','stcw','multisectorial','zbrush','microfinanzas','modelaje','neumáticos','neumático','ingeniería','bisutería','móviles','eléctrica','hábitos','hábito','metrología','cosméticos','cosmético','edición','ortografía','didácticos','logísticas','logística','robótica','auditoría','energía','prevención','agrícolas','agrícola','georeferenciación','valoración','ejecución','prácticas','diagnóstico','preparación','diagnóstico','generación','eléctricos','eléctrico','tóxicos','tóxico',
         'sanandresano','planificación','cocteles','psicosocial','cálculo','lecto','mecánicas','logística','ganadería','eléctrica','eléctricas','mecánica','mecánico','metálica','metálico','metálicas','metálicos','inmersión','vertical','sector','cosméticos','cosmético','legislación',
          'microfinancieras','guianza','acuicola','guadua','planeación','pixologic','vacunación','vehículos','vehículo','ciudadanía','técnias','relación','retrocargadora','educación','través','avícola','avícolas','energética','energético','energéticas','energéticos','autogestión','fotografía',
         'monitoreo','photoshop','kriuol','motoniveladora','máquinas','monoplaza','agroindustria','estética','estético','estéticos','minería','cáculos','atención','física','físicas','energética','formación','evaluación','matemáticas','matemática','café','imágenes','imágen','conservación',
         'señalizador','nómina','suspensión','galletería','buso','bioabonos','decoración', 'pedagógica','pedagógico','café','análisis','recreación','técnicas','técnica','auditorías','niñas','niña','niño','niños','electrónico','metodológicas','lácteos','electrónicas','informáticas','electrónicos','formulación','retrocargador',
         'sarlaft','crítica','críticas','marroquinería','creación','totumo','retiq','flatseamer','combustión','facilitador','balón','producción','electrónica','televisión','animación','nivel','técnico','técnicos','prestación','selección','civiles',
         'petroquímicas','óptica','metrología','patronaje','microsoft','semicriollos','semicriollo','revisión','afectación','entonación',
         'vitrinismo','poscosecha','coreldraw','diagramación','siigo','', 'asesoría','turística','tecnología','aplicación','redacción','víctimas','ética','economía','operación','técnica','propósito','rápidas','vehículo','sólidos','gestión','lógicas','innovación','pedagogía','ecológicos','pastelería','balón','ofimáticas','asfálticas','biológicos','básicos','gestión','códigos','energéticas','contextualización','ámbito','lencería','panadería','mercancías','joyería']
```


```python
temp2 = []
for i in temp:
    busqueda = process.extract(i.lower(), to_add, limit = 1)[0]
    if lev.distance(i.lower(),busqueda[0]) <= 2:
        temp2.append(busqueda[0])
    else:
        temp2.append(i)    
```


```python
nuevos = []

for i in lst:
    
    doc = nlp(i)
    tokens = [token.text.lower() for token in doc] #creamos una lista de tokens de la oración
    oracion = ' '.join(tokens)
        
    for l in range(len(key_words)):
        if key_words[l].lower() in tokens and key_words[l].lower() != temp2[l]:
            oracion = re.sub(r'\b'+key_words[l]+r'\b', temp2[l], oracion)
    
    nuevos.append(oracion)      
```


```python
with open("programas.txt", "w") as output:
    output.write(str(nuevos))
```


```python
lista = ['hola','como''estas']
```


```python
with open('key_words.txt', 'w') as f:
    for item in lista:
        f.write("%s\n" % item)
```


    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    <ipython-input-75-4d11e6b5f1bc> in <module>()
          1 with open('key_words.txt', 'w') as f:
    ----> 2     for item in lista:
          3         f.write("%s\n" % item)


    NameError: name 'lista' is not defined



```python
import csv 
```


```python
to_add = ['catación','patronaje','fitosanitario','bioseguridad','soberanía','químicos','químico','detección','orgánico','líderes','higiénica','higiénico','solución','referencia','cálculos','informática','promoción','social','micro','químicas','químicos','café','vías','draw','ecológico','matemáticos','retrocargador',
		         'múltiples','reentrenamiento','conceptualización','revit','corel','inglés','marmolado','soberanía','básicas','básico','básica','inducción','recepción','confección','metodológicas','aluminio','transformación','extensión','ecológica','entonación','ciudadano','valoración','ejecución','prácticas','asfálticas',
		         'smaw','stcw','multisectorial','zbrush','microfinanzas','modelaje','neumáticos','neumático','ingeniería','bisutería','móviles','eléctrica','hábitos','hábito','metrología','cosméticos','cosmético','edición','ortografía','didácticos','logísticas','logística','robótica','auditoría','energía','energéticas',
		         'sanandresano','planificación','cocteles','psicosocial','cálculo','lecto','mecánicas','logística','ganadería','eléctrica','eléctricas','mecánica','mecánico','metálica','metálico','metálicas','metálicos','inmersión','vertical','sector','cosméticos','cosmético','legislación','eléctricos','eléctrico',
		          'microfinancieras','guianza','acuicola','guadua','planeación','pixologic','vacunación','vehículos','vehículo','ciudadanía','técnias','relación','retrocargadora','educación','través','avícola','avícolas','energética','energético','energéticas','energéticos','autogestión','fotografía','biológicos','básicos',
		         'monitoreo','photoshop','kriuol','motoniveladora','máquinas','monoplaza','agroindustria','estética','estético','estéticos','minería','cáculos','atención','física','físicas','energética','formación','evaluación','matemáticas','matemática','café','imágenes','imágen','conservación','gestión','códigos',
		         'señalizador','nómina','suspensión','galletería','buso','bioabonos','decoración', 'pedagógica','pedagógico','café','análisis','recreación','técnicas','técnica','auditorías','niñas','niña','niño','niños','electrónico','metodológicas','lácteos','electrónicas','informáticas','electrónicos','formulación',
		         'sarlaft','crítica','críticas','marroquinería','creación','totumo','retiq','flatseamer','combustión','facilitador','balón','producción','electrónica','televisión','animación','nivel','técnico','técnicos','prestación','selección','civiles','pedagógicas','eléctrico','formalización','cómputo','ofimáticas',
		         'petroquímicas','óptica','metrología','patronaje','microsoft','semicriollos','semicriollo','revisión','afectación','entonación','diagnóstico','preparación','diagnóstico','generación','prevención','agrícolas','agrícola','georeferenciación','tóxicos','tóxico','ecológicos','pastelería',
		         'vitrinismo','poscosecha','coreldraw','diagramación','siigo','', 'asesoría','turística','tecnología','aplicación','redacción','víctimas','ética','economía','operación','técnica','propósito','rápidas','vehículo','sólidos','gestión','lógicas','innovación','pedagogía','mercancías','joyería','balón']
```


```python
with open('key_words.csv', 'w', encoding='utf-8') as f: 
    write = csv.writer(f) 
    write.writerow(to_add) 
```


```python
nuevos = []
with open('key_words.csv', 'r') as file:
    reader = csv.reader(file)
    for row in reader:
        nuevos = row
```


```python
s = [u'', u'Hello', u'Cool', u'Glam']
i = s.index("HU")
del s[i]
s
```


    ---------------------------------------------------------------------------

    ValueError                                Traceback (most recent call last)

    <ipython-input-13-c3ecc3d7a04e> in <module>()
          1 s = [u'', u'Hello', u'Cool', u'Glam']
    ----> 2 i = s.index("HU")
          3 del s[i]
          4 s


    ValueError: 'HU' is not in list



```python
s
```




    ['Hello', 'Cool', 'Glam']




```python
'hola' in nuevos
```




    False




```python
cd ocox_lab/ocox_eb
```

    /Users/esteban/ocox_lab/ocox_eb



```python
import ocox_corrector

hotel = ocox_corrector.ocox_corrector()
hotel.load_data_scrap()
hotel.huspell_corrector()
hotel.fuzzy_corrector()
```


```python
import ocox_corrector
```


```python
palabras = ocox_corrector.palabras_clave()
```


```python
palabras.get_words()
```




    ['catación',
     'patronaje',
     'fitosanitario',
     'bioseguridad',
     'soberanía',
     'químicos',
     'químico',
     'detección',
     'orgánico',
     'líderes',
     'higiénica',
     'higiénico',
     'solución',
     'referencia',
     'cálculos',
     'informática',
     'promoción',
     'social',
     'micro',
     'químicas',
     'químicos',
     'café',
     'vías',
     'draw',
     'ecológico',
     'matemáticos',
     'retrocargador',
     'múltiples',
     'reentrenamiento',
     'conceptualización',
     'revit',
     'corel',
     'inglés',
     'marmolado',
     'soberanía',
     'básicas',
     'básico',
     'básica',
     'inducción',
     'recepción',
     'confección',
     'metodológicas',
     'aluminio',
     'transformación',
     'extensión',
     'ecológica',
     'entonación',
     'ciudadano',
     'valoración',
     'ejecución',
     'prácticas',
     'asfálticas',
     'smaw',
     'stcw',
     'multisectorial',
     'zbrush',
     'microfinanzas',
     'modelaje',
     'neumáticos',
     'neumático',
     'ingeniería',
     'bisutería',
     'móviles',
     'eléctrica',
     'hábitos',
     'hábito',
     'metrología',
     'cosméticos',
     'cosmético',
     'edición',
     'ortografía',
     'didácticos',
     'logísticas',
     'logística',
     'robótica',
     'auditoría',
     'energía',
     'energéticas',
     'sanandresano',
     'planificación',
     'cocteles',
     'psicosocial',
     'cálculo',
     'lecto',
     'mecánicas',
     'logística',
     'ganadería',
     'eléctrica',
     'eléctricas',
     'mecánica',
     'mecánico',
     'metálica',
     'metálico',
     'metálicas',
     'metálicos',
     'inmersión',
     'vertical',
     'sector',
     'cosméticos',
     'cosmético',
     'legislación',
     'eléctricos',
     'eléctrico',
     'microfinancieras',
     'guianza',
     'acuicola',
     'guadua',
     'planeación',
     'pixologic',
     'vacunación',
     'vehículos',
     'vehículo',
     'ciudadanía',
     'técnias',
     'relación',
     'retrocargadora',
     'educación',
     'través',
     'avícola',
     'avícolas',
     'energética',
     'energético',
     'energéticas',
     'energéticos',
     'autogestión',
     'fotografía',
     'biológicos',
     'básicos',
     'monitoreo',
     'photoshop',
     'kriuol',
     'motoniveladora',
     'máquinas',
     'monoplaza',
     'agroindustria',
     'estética',
     'estético',
     'estéticos',
     'minería',
     'cáculos',
     'atención',
     'física',
     'físicas',
     'energética',
     'formación',
     'evaluación',
     'matemáticas',
     'matemática',
     'café',
     'imágenes',
     'imágen',
     'conservación',
     'gestión',
     'códigos',
     'señalizador',
     'nómina',
     'suspensión',
     'galletería',
     'buso',
     'bioabonos',
     'decoración',
     'pedagógica',
     'pedagógico',
     'café',
     'análisis',
     'recreación',
     'técnicas',
     'técnica',
     'auditorías',
     'niñas',
     'niña',
     'niño',
     'niños',
     'electrónico',
     'metodológicas',
     'lácteos',
     'electrónicas',
     'informáticas',
     'electrónicos',
     'formulación',
     'sarlaft',
     'crítica',
     'críticas',
     'marroquinería',
     'creación',
     'totumo',
     'retiq',
     'flatseamer',
     'combustión',
     'facilitador',
     'balón',
     'producción',
     'electrónica',
     'televisión',
     'animación',
     'nivel',
     'técnico',
     'técnicos',
     'prestación',
     'selección',
     'civiles',
     'pedagógicas',
     'eléctrico',
     'formalización',
     'cómputo',
     'ofimáticas',
     'petroquímicas',
     'óptica',
     'metrología',
     'patronaje',
     'microsoft',
     'semicriollos',
     'semicriollo',
     'revisión',
     'afectación',
     'entonación',
     'diagnóstico',
     'preparación',
     'diagnóstico',
     'generación',
     'prevención',
     'agrícolas',
     'agrícola',
     'georeferenciación',
     'tóxicos',
     'tóxico',
     'ecológicos',
     'pastelería',
     'vitrinismo',
     'poscosecha',
     'coreldraw',
     'diagramación',
     'siigo',
     '',
     'asesoría',
     'turística',
     'tecnología',
     'aplicación',
     'redacción',
     'víctimas',
     'ética',
     'economía',
     'operación',
     'técnica',
     'propósito',
     'rápidas',
     'vehículo',
     'sólidos',
     'gestión',
     'lógicas',
     'innovación',
     'pedagogía',
     'mercancías',
     'joyería',
     'balón',
     'sena']




```python
palabras.delete_word('sena')
```




    0




```python
nombre = 'key_words'
```


```python
import csv 
```


```python
def get_words():
    key_words = []

    try :
        with open(''+nombre+'.csv', 'r') as file:
            reader = csv.reader(file)
            for row in reader:
                key_words = row
    except:
        return 0
    return key_words
```


```python

with open(''+nombre+'.csv', 'r') as file:
            reader = csv.reader(file)
            for row in reader:
                key_words = row
```


```python
get_words()
```




    ['catación',
     'patronaje',
     'fitosanitario',
     'bioseguridad',
     'soberanía',
     'químicos',
     'químico',
     'detección',
     'orgánico',
     'líderes',
     'higiénica',
     'higiénico',
     'solución',
     'referencia',
     'cálculos',
     'informática',
     'promoción',
     'social',
     'micro',
     'químicas',
     'químicos',
     'café',
     'vías',
     'draw',
     'ecológico',
     'matemáticos',
     'retrocargador',
     'múltiples',
     'reentrenamiento',
     'conceptualización',
     'revit',
     'corel',
     'inglés',
     'marmolado',
     'soberanía',
     'básicas',
     'básico',
     'básica',
     'inducción',
     'recepción',
     'confección',
     'metodológicas',
     'aluminio',
     'transformación',
     'extensión',
     'ecológica',
     'entonación',
     'ciudadano',
     'valoración',
     'ejecución',
     'prácticas',
     'asfálticas',
     'smaw',
     'stcw',
     'multisectorial',
     'zbrush',
     'microfinanzas',
     'modelaje',
     'neumáticos',
     'neumático',
     'ingeniería',
     'bisutería',
     'móviles',
     'eléctrica',
     'hábitos',
     'hábito',
     'metrología',
     'cosméticos',
     'cosmético',
     'edición',
     'ortografía',
     'didácticos',
     'logísticas',
     'logística',
     'robótica',
     'auditoría',
     'energía',
     'energéticas',
     'sanandresano',
     'planificación',
     'cocteles',
     'psicosocial',
     'cálculo',
     'lecto',
     'mecánicas',
     'logística',
     'ganadería',
     'eléctrica',
     'eléctricas',
     'mecánica',
     'mecánico',
     'metálica',
     'metálico',
     'metálicas',
     'metálicos',
     'inmersión',
     'vertical',
     'sector',
     'cosméticos',
     'cosmético',
     'legislación',
     'eléctricos',
     'eléctrico',
     'microfinancieras',
     'guianza',
     'acuicola',
     'guadua',
     'planeación',
     'pixologic',
     'vacunación',
     'vehículos',
     'vehículo',
     'ciudadanía',
     'técnias',
     'relación',
     'retrocargadora',
     'educación',
     'través',
     'avícola',
     'avícolas',
     'energética',
     'energético',
     'energéticas',
     'energéticos',
     'autogestión',
     'fotografía',
     'biológicos',
     'básicos',
     'monitoreo',
     'photoshop',
     'kriuol',
     'motoniveladora',
     'máquinas',
     'monoplaza',
     'agroindustria',
     'estética',
     'estético',
     'estéticos',
     'minería',
     'cáculos',
     'atención',
     'física',
     'físicas',
     'energética',
     'formación',
     'evaluación',
     'matemáticas',
     'matemática',
     'café',
     'imágenes',
     'imágen',
     'conservación',
     'gestión',
     'códigos',
     'señalizador',
     'nómina',
     'suspensión',
     'galletería',
     'buso',
     'bioabonos',
     'decoración',
     'pedagógica',
     'pedagógico',
     'café',
     'análisis',
     'recreación',
     'técnicas',
     'técnica',
     'auditorías',
     'niñas',
     'niña',
     'niño',
     'niños',
     'electrónico',
     'metodológicas',
     'lácteos',
     'electrónicas',
     'informáticas',
     'electrónicos',
     'formulación',
     'sarlaft',
     'crítica',
     'críticas',
     'marroquinería',
     'creación',
     'totumo',
     'retiq',
     'flatseamer',
     'combustión',
     'facilitador',
     'balón',
     'producción',
     'electrónica',
     'televisión',
     'animación',
     'nivel',
     'técnico',
     'técnicos',
     'prestación',
     'selección',
     'civiles',
     'pedagógicas',
     'eléctrico',
     'formalización',
     'cómputo',
     'ofimáticas',
     'petroquímicas',
     'óptica',
     'metrología',
     'patronaje',
     'microsoft',
     'semicriollos',
     'semicriollo',
     'revisión',
     'afectación',
     'entonación',
     'diagnóstico',
     'preparación',
     'diagnóstico',
     'generación',
     'prevención',
     'agrícolas',
     'agrícola',
     'georeferenciación',
     'tóxicos',
     'tóxico',
     'ecológicos',
     'pastelería',
     'vitrinismo',
     'poscosecha',
     'coreldraw',
     'diagramación',
     'siigo',
     '',
     'asesoría',
     'turística',
     'tecnología',
     'aplicación',
     'redacción',
     'víctimas',
     'ética',
     'economía',
     'operación',
     'técnica',
     'propósito',
     'rápidas',
     'vehículo',
     'sólidos',
     'gestión',
     'lógicas',
     'innovación',
     'pedagogía',
     'mercancías',
     'joyería',
     'balón']




```python
get_words()
```




    0




```python
cd ocox_lab/ocox_eb
```

    /Users/esteban/ocox_lab/ocox_eb



```python
with open('programas.txt','r') as file:
    programas = file.read()
```


```python
import json
```


```python
import re
```


```python
json.loads('[ "A","B","C" , " D"]')
```




    ['A', 'B', 'C', ' D']




```python
re.findall(r'"\s*([^"]*?)\s*"', programas)
```




    []




```python
import ast
l = ast.literal_eval(programas)
l = [i.strip() for i in l]
```


```python

```

